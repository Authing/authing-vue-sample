(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],m=0,d=[];m<r.length;m++)o=r[m],n[o]&&d.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={0:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,1]),s()})({0:function(t,e,s){t.exports=s("Vtdi")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},2:function(t,e){},20:function(t,e){},3:function(t,e){},"3FMD":function(t,e){function s(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id="3FMD"},4:function(t,e){},5:function(t,e){},6:function(t,e){},"6bId":function(t,e,s){"use strict";var a=s("97P/"),n=s.n(a);n.a},7:function(t,e){},8:function(t,e){},"8NnG":function(t,e,s){},9:function(t,e){},"97P/":function(t,e,s){},"E/3K":function(t,e,s){"use strict";var a=s("XSNu"),n=s.n(a);n.a},"OmL/":function(t,e,s){},Vtdi:function(t,e,s){"use strict";s.r(e);s("yt8O"),s("VRzm");var a=s("Kw5r"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logmod"},[s("div",{staticClass:"logmod__wrapper"},[s("span",{staticClass:"logmod__close"},[t._v("Close")]),s("div",{staticClass:"logmod__container"},[t._m(0),s("div",{staticClass:"logmod__tab-wrapper"},[t._m(1),s("div",{staticClass:"logmod__tab lgm-1"},[t._m(2),s("div",{staticClass:"logmod__form"},[s("form",{staticClass:"simform",attrs:{"accept-charset":"utf-8",action:"#"}},[s("div",{staticClass:"sminputs"},[s("div",{staticClass:"input full"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.email,expression:"registerForm.email"}],staticClass:"string optional",attrs:{maxlength:"255",placeholder:"邮箱",type:"email",size:"50"},domProps:{value:t.registerForm.email},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"email",e.target.value)}}})])]),s("div",{staticClass:"sminputs"},[s("div",{staticClass:"input full"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.password,expression:"registerForm.password"}],staticClass:"string optional",attrs:{maxlength:"255",placeholder:"密码",type:"password",size:"50"},domProps:{value:t.registerForm.password},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"password",e.target.value)}}})])]),s("div",{staticClass:"simform__actions"},[s("input",{staticClass:"sumbit",attrs:{name:"commit",type:"sumbit",value:"立即注册"},on:{click:t.register}})])])]),s("div",{staticClass:"logmod__alter"},[s("div",{staticClass:"logmod__alter-container"},t._l(t.oauthList,function(e){return s("a",{staticClass:"connect facebook",attrs:{href:e.url}},[t._m(3,!0),s("div",{staticClass:"connect__context"},[s("span",[t._v("使用 "),s("strong",[t._v(t._s(e.name))]),t._v(" 登录")])])])}))])]),s("div",{staticClass:"logmod__tab lgm-2"},[t._m(4),s("div",{staticClass:"logmod__form"},[s("form",{staticClass:"simform",attrs:{"accept-charset":"utf-8",action:"#"}},[s("div",{staticClass:"sminputs"},[s("div",{staticClass:"input full"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.email,expression:"loginForm.email"}],staticClass:"string optional",attrs:{maxlength:"255",placeholder:"sample@authing.cn",type:"email",size:"50"},domProps:{value:t.loginForm.email},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"email",e.target.value)}}})])]),s("div",{staticClass:"sminputs"},[s("div",{staticClass:"input full"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"string optional",attrs:{maxlength:"255",placeholder:"123456",type:"password",size:"50"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.verifyCodeSrc,expression:"verifyCodeSrc"}],staticClass:"sminputs"},[s("div",{staticClass:"input string optional"},[s("label",{staticClass:"string optional",attrs:{for:"user-pw"}},[t._v("验证码 *")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.verifyCode,expression:"loginForm.verifyCode"}],staticClass:"string optional",attrs:{maxlength:"255",placeholder:"验证码",type:"text",size:"50"},domProps:{value:t.loginForm.verifyCode},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"verifyCode",e.target.value)}}})]),s("div",{staticClass:"input string optional"},[s("img",{attrs:{src:t.verifyCodeSrc}})])]),s("div",{staticClass:"simform__actions"},[s("input",{staticClass:"sumbit",attrs:{name:"commit",type:"sumbit",value:"登录"},on:{click:t.login}})])])]),s("div",{staticClass:"logmod__alter"},[s("div",{staticClass:"logmod__alter-container"},t._l(t.oauthList,function(e){return s("a",{staticClass:"connect facebook",attrs:{href:e.url}},[t._m(5,!0),s("div",{staticClass:"connect__context"},[s("span",[t._v("使用 "),s("strong",[t._v(t._s(e.name))]),t._v(" 登录")])])])}))])])])])]),s("notifications",{attrs:{group:"foo"}})],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"logmod__tabs"},[s("li",{attrs:{"data-tabtar":"lgm-0"}},[s("a",{attrs:{href:"#"}},[t._v("小程序扫码登录")])]),s("li",{attrs:{"data-tabtar":"lgm-2"}},[s("a",{attrs:{href:"#"}},[t._v("帐号密码登录")])]),s("li",{attrs:{"data-tabtar":"lgm-1"}},[s("a",{attrs:{href:"#"}},[t._v("账号密码注册")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logmod__tab lgm-0"},[s("div",{staticClass:"logmod__heading",staticStyle:{height:"300px"}},[s("div",{attrs:{id:"qrcode-node"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logmod__heading"},[s("span",{staticClass:"logmod__heading-subtitle"},[t._v("提供账号密码 "),s("strong",[t._v("创建账号")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"connect__icon"},[s("i",{staticClass:"fa fa-github"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logmod__heading"},[s("span",{staticClass:"logmod__heading-subtitle"},[t._v("输入邮箱和密码 "),s("strong",[t._v("进行登录")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"connect__icon"},[s("i",{staticClass:"fa fa-github"})])}],l=(s("dRSK"),s("vDqi"),s("eChk")),c={name:"HelloWorld",props:{msg:String},data:function(){return{auth:null,loginForm:{email:"sample@authing.cn",password:"123456",verifyCode:""},verifyCodeSrc:"",registerForm:{email:"",password:""},oauthList:[]}},methods:{initAuthing:function(){var t=this,e=new l({clientId:"5a9fa26cf8635a000185528c",secret:"427e24d3b7e289ae9469ab6724dc7ff0"});e.then(function(e){t.auth=e,t.readOAuthList(),e.startWXAppScaning({mount:"qrcode-node"})}).catch(function(t){console.log(t)})},readOAuthList:function(){var t=this;this.auth.readOAuthList().then(function(e){t.oauthList=e})},login:function(){var t=this;this.auth.login(this.loginForm).then(function(e){console.log(e),t.$notify({group:"foo",type:"success",title:"登录成功"}),t.$notify({group:"foo",type:"success",title:"用户信息",position:"center",text:JSON.stringify(e)})}).catch(function(e){console.log(e),t.$notify({group:"foo",type:"warn",title:"登录失败",text:e.message.message}),2e3!==e.message.code&&2001!==e.message.code||(t.verifyCodeSrc=e.message.data.url)})},register:function(){var t=this;this.auth.register(this.loginForm).then(function(e){console.log(e),t.$notify({group:"foo",type:"success",title:"注册成功"})}).catch(function(e){console.log(e),t.$notify({group:"foo",type:"warn",title:"注册失败",text:e.message.message})})}},mounted:function(){this.initAuthing();var t={tabsElementName:".logmod__tabs li",tabElementName:".logmod__tab",inputElementsName:".logmod__form .input",hidePasswordName:".hide-password",inputElements:null,tabsElement:null,tabElement:null,hidePassword:null,activeTab:null,tabSelection:0,findElements:function(){var t=this;return t.tabsElement=$(t.tabsElementName),t.tabElement=$(t.tabElementName),t.inputElements=$(t.inputElementsName),t.hidePassword=$(t.hidePasswordName),t},setState:function(t){var e=this,s=null;return t||(t=0),e.tabsElement&&(s=$(e.tabsElement[t]),s.addClass("current"),$("."+s.attr("data-tabtar")).addClass("show")),e},getActiveTab:function(){var t=this;return t.tabsElement.each(function(e,s){$(s).hasClass("current")&&(t.activeTab=$(s))}),t},addClickEvents:function(){var t=this;return t.hidePassword.on("click",function(t){var e=$(this),s=e.prev("input");"password"==s.attr("type")?(s.attr("type","text"),e.text("Hide")):(s.attr("type","password"),e.text("Show"))}),t.tabsElement.on("click",function(e){var s=$(this).attr("data-tabtar");e.preventDefault(),t.activeTab.removeClass("current"),t.activeTab=$(this),t.activeTab.addClass("current"),t.tabElement.each(function(t,e){e=$(e),e.removeClass("show"),e.hasClass(s)&&e.addClass("show")})}),t.inputElements.find("label").on("click",function(t){var e=$(this),s=e.next("input");s.focus()}),t},initialize:function(){var t=this;t.findElements().setState().getActiveTab().addClickEvents()}};$(document).ready(function(){t.initialize()})}},u=c,m=(s("6bId"),s("nr9p")),d=Object(m["a"])(u,o,r,!1,null,"b33dbdd2",null),f=d.exports,p=(s("OmL/"),{name:"app",components:{HelloWorld:f}}),v=p,g=(s("ZL7j"),Object(m["a"])(v,n,i,!1,null,null,null)),h=g.exports,_=s("7pj7"),C=s.n(_),b=s("jE9Z"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result-wrapper"},[s("div",{staticClass:"result"},[t.success?s("div",{staticClass:"result-circle"},[s("div",{staticStyle:{"line-height":"60px"},attrs:{type:"android-done",color:"#fff",size:"50"}})]):t._e(),t.success?t._e():s("div",{staticClass:"result-circle warn"},[s("div",{staticClass:"warn",staticStyle:{"line-height":"60px"},attrs:{color:"#fff",size:"50"}})]),s("div",{staticClass:"result-content"},[s("h1",[t._v("\n                "+t._s(t.message)+"\n            ")]),t._m(0)])]),s("notifications",{attrs:{group:"foo"}})],1)},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"help",staticStyle:{"margin-top":"15px"}},[s("a",{attrs:{href:"/"}},[t._v("返回主页")])])}],E={data:function(){return{message:"验证中...",success:!1}},mounted:function(){var t=this.$route.query;if(console.log(t),t.code||this.$notify({group:"foo",type:"warn",title:"登录参数错误，请重试",position:"center"}),"200"==t.code){this.success=!0,this.message="登录认证成功";try{var e=JSON.parse(t.data);localStorage.setItem("token",e.token),localStorage.setItem("userId",e._id),localStorage.setItem("email",e.email),localStorage.setItem("photo",e.photo),localStorage.setItem("username",e.username),this.message="认证成功：欢迎你，"+e.username||e.email}catch(t){this.message="登录认证失败，参数错误"}}else this.message=t.message?"登录认证失败，请重试: "+t.message:"登录认证失败，请重试"}},x=E,S=(s("E/3K"),Object(m["a"])(x,y,w,!1,null,null,null)),F=S.exports;a["default"].config.productionTip=!1,a["default"].use(C.a),a["default"].use(b["a"]);var O=[{path:"/",component:f},{path:"/redirect",component:F}],N=new b["a"]({routes:O});new a["default"]({router:N,render:function(t){return t(h)}}).$mount("#app")},XSNu:function(t,e,s){},ZL7j:function(t,e,s){"use strict";var a=s("8NnG"),n=s.n(a);n.a}});
//# sourceMappingURL=app.388c8c8a.js.map